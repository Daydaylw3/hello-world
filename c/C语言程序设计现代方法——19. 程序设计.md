[toc]

# 十九. 程序设计

着重讨论好的程序设计所需要的技术

涵盖一些在程序设计中比较重要的概念、如何使用它们来写出易读、易于维护的 C 程序

## 19.1 模块

程序是一些独立的**模块**

**模块**是一组服务的集合

一些服务可以被程序其他部分（称为**客户**）使用

每个模块都有一个**接口**来描述所提供的的服务

模块的细节（包括源代码）都包含在模块的**实现**中

在 C 语言环境下

**服务**——函数

**接口**——头文件

**实现**——函数定义的源文件

![image-20220506145640690](/Users/daydaylw3/Pictures/typora/image-20220506145640690.png)

+ **抽象**
+ **可复用性**
+ **可维护性**

### 19.1.1 内聚性与耦合性

+ **高内聚性**：模块中的元素应该彼此紧密关联。会使得模块更易于使用，更容易理解
+ **低耦合性**：模块之间应尽可能相互独立。使程序更易于修改，方便复用模块

### 19.1.2 模块的类型

+ **数据池**：相关变量或常量的集合。头文件。不建议变量放在头文件
+ **库**：相关函数的集合
+ **抽象对象**：对于隐藏的数据结构进行操作的函数的集合
+ **抽象数据类型（ADT）**：将具体数据实现方式隐藏起来的数据类型。客户模块可以使用该类型来声明变量，但不会知道这些变量的具体数据结构。必须通过抽象数据类型提供的函数对变量进行操作。

## 19.2 信息隐藏

+ **安全性**
+ **灵活性**：只要模块是按正确的方式设计的，就不需要改变模块的接口

强制信息隐藏的主要工具是 `static` 存储类型（➡️18.2 节）

+ 文件作用域的变量声明成 `static` 使其具有内部链接
+ 将函数声明成 `static` 使其只能被同一文件中的其他函数直接调用

## 19.3 抽象数据类型

### 19.3.1 封装

### 19.3.2 不完整类型

**不完整类型**（incomplete type）：描述了对象但缺少定义对象大小所需的信息

```c
struct t; /* incomplete declaration of t */
```

## 19.4 栈抽象数据类型

### 19.4.1 为栈抽象数据类型定义接口

### 19.4.2 用定长数组实现栈抽象数据类型

### 19.4.3 改变栈抽象数据类型中数据项的类型

### 19.4.4 用动态数组实现栈抽象数据类型

### 19.4.5 用链表实现栈抽象数据类型

## 19.5 抽象数据类型的设计问题

### 19.5.1 命名惯例

### 19.5.2 错误处理

### 19.5.3 通用抽象数据类型

### 19.5.4 新语言中的抽象数据类型

## 问与答